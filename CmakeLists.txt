# 指定所需的 CMake 最低版本
cmake_minimum_required(VERSION 3.10)

# 设置项目名称和版本
project(main VERSION 1.0 LANGUAGES C)

# 设置 C 标准
set(CMAKE_C_STANDARD 11)
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_C_EXTENSIONS OFF)
set(CMAKE_C_COMPILER "D:/w64devkit/bin/gcc")
set(CMAKE_CXX_COMPILER "D:/w64devkit/bin/g++")



# 添加编译选项
add_compile_options(-Wall -Wextra)

#直接在命令行中看到 -I 选项
set(CMAKE_USE_RESPONSE_FILE_INCLUDES OFF)

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)




# 收集源文件
file(GLOB SOURCES 
    "src/*.c"
    "main.c"
)

# 创建可执行文件
add_executable(
    ${PROJECT_NAME} 
    ${SOURCES}
    )

target_include_directories(${PROJECT_NAME} PRIVATE 
    
    ${CMAKE_SOURCE_DIR}/inc
    D:/w64devkit/bin/include
    ${CMAKE_SOURCE_DIR}/../../
    
)

# 安装规则
install(TARGETS ${PROJECT_NAME}
    RUNTIME DESTINATION bin
)

# 如果有头文件需要安装
# install(DIRECTORY inc/
#     DESTINATION include
# )

# 打印一些信息
message(STATUS "Build type: ${CMAKE_BUILD_TYPE}")
message(STATUS "C compiler: ${CMAKE_C_COMPILER}")
message(STATUS "Project source directory: ${CMAKE_SOURCE_DIR}")
message(STATUS "Project binary directory: ${CMAKE_BINARY_DIR}")
