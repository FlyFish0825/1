# 指定所需的 CMake 最低版本
cmake_minimum_required(VERSION 3.10)

# 设置项目名称和版本
project(main VERSION 1.0 LANGUAGES C)

# 设置 C 标准
set(CMAKE_C_STANDARD 11)
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_C_EXTENSIONS OFF)
set(CMAKE_C_COMPILER "D:/w64devkit/bin/gcc")
set(CMAKE_CXX_COMPILER "D:/w64devkit/bin/g++")



# 添加编译选项
add_compile_options(-Wall -Wextra)


set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

# 添加头文件搜索路径
include_directories(
    ${CMAKE_SOURCE_DIR}/inc
    D:/w64devkit/bin/include
    )

# 收集源文件
file(GLOB SOURCES 
    "src/*.c"
    "main.c"
)

# 创建可执行文件
add_executable(
    ${PROJECT_NAME} 
    ${SOURCES}
    )

# 如果需要链接库文件，可以使用 target_link_libraries
# target_link_libraries(${PROJECT_NAME} 
#     PRIVATE
#         some_library
# )

# 安装规则
install(TARGETS ${PROJECT_NAME}
    RUNTIME DESTINATION bin
)

# 如果有头文件需要安装
# install(DIRECTORY inc/
#     DESTINATION include
# )

# 打印一些信息
message(STATUS "Build type: ${CMAKE_BUILD_TYPE}")
message(STATUS "C compiler: ${CMAKE_C_COMPILER}")
message(STATUS "Project source directory: ${CMAKE_SOURCE_DIR}")
message(STATUS "Project binary directory: ${CMAKE_BINARY_DIR}")
